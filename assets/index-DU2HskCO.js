const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ym5PNaS_.js","assets/react-CvR-uKN7.js","assets/vendor-kV9GpcYC.js","assets/firebase-BJdrnZPM.js","assets/mui-NliH6qLM.js","assets/index-C4Csgd0h.js","assets/index-DQ-awO-w.js"])))=>i.map(i=>d[i]);
import{u as ae,l as ie,r as p,j as t,N,H as ce,m as de,n as le,d as ue,o as me,p as pe,B as he,q as fe,t as S,v as xe,P as ge}from"./react-CvR-uKN7.js";import{p as T,q as E,t as ye,v as we,x as A,y as je,z as be}from"./vendor-kV9GpcYC.js";import{i as ve,g as Ce,c as U,a as g,b as Se,d as ke,e as Z,u as Te,f as Ee,o as X,s as Pe,h as Ae,j as Le}from"./firebase-BJdrnZPM.js";import{A as Re,T as W,I as Oe,M as Ie,a as x,B as w,b as f,D as _e,L as z,c as $,d as L,e as R,f as De,C as Me,g as Ue,u as Be,h as Fe,P as ee,i as O,j as qe,k as Ne}from"./mui-NliH6qLM.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function We(){try{const e=window.localStorage.getItem("appState");return e?JSON.parse(e):{}}catch(e){return console.warn("Error loading state from localStorage:",e),{}}}var V;const ze={value:((V=We().counter)==null?void 0:V.value)||0},oe=T({name:"counter",initialState:ze,reducers:{increment:e=>{e.value+=1},decrement:e=>{e.value-=1},setCounter:(e,o)=>{e.value=o.payload}}}),{increment:Fo,decrement:qo,setCounter:No}=oe.actions,$e=oe.reducer,He={apiKey:"AIzaSyDNbR8CSZwKdAYzDcbEMy6mzwpYBstWKBg",authDomain:"my-portfolio-f5109.firebaseapp.com",projectId:"my-portfolio-f5109",storageBucket:"my-portfolio-f5109.firebasestorage.app",messagingSenderId:"1002923009959",appId:"1:1002923009959:web:eaf2f61454e51ce800f882",measurementId:"G-7SG48278FF"},te=ve(He),j=Ce(te);U(j,"todos");const Ge=async e=>{const r=g().currentUser;if(!r)throw new Error("User not authenticated");const n=U(j,"users",r.uid,"todos");return(await Se(n,e)).id},Ye=async()=>{const o=g().currentUser;if(!o)throw new Error("User not authenticated");const r=U(j,"users",o.uid,"todos");return(await ke(r)).docs.map(s=>({id:s.id,...s.data()}))},Ke=async(e,o)=>{const n=g().currentUser;if(!n)throw new Error("User not authenticated");try{const s=Z(j,"users",n.uid,"todos",e);await Te(s,o),console.log("Todo updated:",e)}catch(s){throw console.error("Error updating todo:",s),s}},Je=async e=>{const r=g().currentUser;if(!r)throw new Error("User not authenticated");try{const n=Z(j,"users",r.uid,"todos",e);await Ee(n),console.log("Todo deleted:",e)}catch(n){throw console.error("Error deleting todo:",n),n}},Qe={todos:[],loading:!1,error:null},k=E("todos/fetchTodos",async(e,{rejectWithValue:o})=>{try{return await Ye()}catch(r){return r instanceof Error?o(r.message):o("An unknown error occurred")}}),Ve=E("todos/addTodo",async(e,{rejectWithValue:o})=>{try{return{id:await Ge({title:e.title,checked:e.checked??!1}),...e}}catch(r){return r instanceof Error?o(r.message):o("An unknown error occurred")}}),Ze=E("todos/updateTodo",async(e,{rejectWithValue:o})=>{try{return await Ke(e.id,e),e}catch(r){return r instanceof Error?o(r.message):o("An unknown error occurred")}}),H=E("todos/deleteTodo",async e=>(await Je(e),e)),re=T({name:"todos",initialState:Qe,reducers:{logoutTodos:e=>{e.todos=[]}},extraReducers:e=>{e.addCase(k.pending,o=>{o.loading=!0,o.error=null}).addCase(k.fulfilled,(o,r)=>{o.todos=r.payload,o.loading=!1}).addCase(k.rejected,(o,r)=>{o.loading=!1,o.error=r.payload}).addCase(Ve.fulfilled,(o,r)=>{o.todos.push(r.payload)}).addCase(Ze.fulfilled,(o,r)=>{const n=o.todos.findIndex(s=>s.id===r.payload.id);n!==-1&&Object.assign(o.todos[n],r.payload)}).addCase(H.fulfilled,(o,r)=>{o.todos=o.todos.filter(n=>n.id!==r.payload)}).addCase(H.rejected,(o,r)=>{o.error=r.payload})}}),{logoutTodos:Xe}=re.actions,eo=re.reducer,oo={user:null,isLoading:!1,error:null},se=T({name:"auth",initialState:oo,reducers:{setUser(e,o){e.user=o.payload},setLoading(e,o){e.isLoading=o.payload},setError(e,o){e.error=o.payload},clearUser(e){e.user=null}}}),{setUser:I,setLoading:G,setError:Y,clearUser:_}=se.actions,to=se.reducer,ro={isOpen:!1,modalType:null,modalProps:{}},ne=T({name:"modal",initialState:ro,reducers:{openModal:(e,o)=>{e.isOpen=!0,e.modalType=o.payload.type,e.modalProps=o.payload.props||{}},closeModal:e=>{e.isOpen=!1,e.modalType=null,e.modalProps={}}}}),{openModal:K,closeModal:D}=ne.actions,so=ne.reducer;function no(e){try{const o=JSON.stringify(e);window.localStorage.setItem("appState",o)}catch(o){console.warn("Error saving state to localStorage:",o)}}const M=ye({reducer:{counter:$e,todos:eo,auth:to,modal:so}});M.subscribe(()=>{const e=M.getState();no({todos:e.todos,counter:e.counter})});const b=()=>ae(),B=ie,ao="modulepreload",io=function(e){return"/training/"+e},J={},F=function(o,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=io(l),l in J)return;J[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":ao,d||(u.as="script"),u.crossOrigin="",u.href=l,c&&u.setAttribute("nonce",c),document.head.appendChild(u),d)return new Promise((v,C)=>{u.addEventListener("load",v),u.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return o().catch(i)})},co=()=>{const e=b(),o=g();p.useEffect(()=>{const r=X(o,n=>{n&&e(k()),n||e(Xe())});return()=>r()},[o,e])},P=g(te),lo=async(e,o)=>{const r=await Ae(P,e,o);return{uid:r.user.uid,email:r.user.email}},uo=async(e,o)=>{const r=await Le(P,e,o);return{uid:r.user.uid,email:r.user.email}},mo=async()=>{await Pe(P)},po=e=>X(P,r=>{e(r?{uid:r.uid,email:r.email}:null)}),ho=()=>{const e=b(),o=B(d=>d.auth.user),[r,n]=p.useState(!1),s=async()=>{await mo(),e(_()),e(D())},i=()=>{e(K({type:"auth"}))},a=()=>{e(K({type:"logout",props:{onConfirm:s}}))},c=()=>{n(!r)},l=[{text:"Home",path:"/"},{text:"Counter",path:"/counter"},{text:"Todo App",path:"/todo-app"}];return t.jsxs(Re,{position:"static",sx:{backgroundColor:"#1976d2"},children:[t.jsxs(W,{style:{alignItems:"center"},children:[t.jsx(Oe,{color:"inherit",edge:"start",onClick:c,sx:{display:{xs:"flex",md:"none"}},children:t.jsx(Ie,{})}),t.jsx(x,{variant:"h6",component:"div",sx:{flexGrow:1},children:"My Application"}),t.jsxs(w,{sx:{display:{xs:"none",md:"flex"},gap:2},children:[l.map(d=>t.jsx(f,{color:"inherit",component:N,to:d.path,sx:{position:"relative","&.active":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontWeight:"bold"},"&:hover":{transform:"scale(1.05)",transition:"0.2s ease-in-out"}},children:d.text},d.text)),o?t.jsx(f,{onClick:a,sx:{backgroundColor:"#d32f2f",color:"#fff","&:hover":{backgroundColor:"#b71c1c"}},children:"Logout"}):t.jsx(f,{onClick:i,sx:{backgroundColor:"#4caf50",color:"#fff","&:hover":{backgroundColor:"#388e3c"}},children:"Login"})]})]}),t.jsxs(_e,{anchor:"left",open:r,onClose:c,sx:{"& .MuiDrawer-paper":{width:250,backgroundColor:"#f5f5f5"}},children:[t.jsx(W,{style:{backgroundColor:"#1976d2"},children:t.jsx(x,{variant:"h6",component:"div",sx:{flexGrow:1,color:"white"},children:"My Application"})}),t.jsx(z,{children:l.map(d=>t.jsx($,{disablePadding:!0,children:t.jsx(L,{component:N,to:d.path,onClick:c,sx:{margin:"10px","&.active":{backgroundColor:"#1976d2",color:"white",borderRadius:"8px",fontWeight:"bold"},"&:hover":{backgroundColor:"#e3f2fd",transition:"0.2s ease-in-out"}},children:t.jsx(R,{primary:d.text})})},d.text))}),t.jsx(De,{sx:{my:1}}),t.jsx(z,{children:t.jsx($,{disablePadding:!0,children:o?t.jsx(L,{onClick:()=>{a(),c()},sx:{backgroundColor:"#d32f2f",margin:"10px",borderRadius:"8px",color:"#fff","&:hover":{backgroundColor:"#b71c1c"}},children:t.jsx(R,{primary:"Logout",sx:{textAlign:"center"}})}):t.jsx(L,{onClick:()=>{i(),c()},sx:{backgroundColor:"#4caf50",margin:"10px",borderRadius:"8px",color:"#fff","&:hover":{backgroundColor:"#388e3c"}},children:t.jsx(R,{primary:"Login",sx:{textAlign:"center"}})})})})]})]})},fo=()=>t.jsxs(w,{component:"footer",sx:{py:2,textAlign:"center",backgroundColor:"primary.main",color:"white"},children:["© ",new Date().getFullYear()," Taras Chirkov"]}),xo=({children:e})=>t.jsxs(w,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[t.jsx(ho,{}),t.jsx(Me,{sx:{flexGrow:1,mt:2},maxWidth:"sm",style:{marginTop:"24px"},children:e}),t.jsx(fo,{})]}),go=Ue({palette:{primary:{main:"#1976d2"},secondary:{main:"#ff4081"}},typography:{fontFamily:"Roboto, Arial, sans-serif"}}),yo=({title:e="Головна | Taras Chirkov",description:o="Тут я експерементую ",keywords:r="todo, task manager, productivity, планування",image:n="/public/favicon.ico",url:s="https://yourdomain.com"})=>t.jsxs(ce,{children:[t.jsx("title",{children:e}),t.jsx("meta",{name:"description",content:o}),t.jsx("meta",{name:"keywords",content:r}),t.jsx("meta",{property:"og:title",content:e}),t.jsx("meta",{property:"og:description",content:o}),t.jsx("meta",{property:"og:image",content:n}),t.jsx("meta",{property:"og:url",content:s}),t.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),t.jsx("link",{rel:"canonical",href:s})]}),wo=({title:e,message:o,onClose:r})=>t.jsxs("div",{className:"modal-box",children:[t.jsx("h2",{children:e}),t.jsx("p",{children:o}),t.jsx("button",{onClick:r,children:"Закрити"})]}),jo=({onClose:e,onConfirm:o})=>t.jsxs("div",{className:"modal-box",children:[t.jsx("h2",{children:"Ви впевнені?"}),t.jsx("button",{onClick:o,children:"Так"}),t.jsx("button",{onClick:e,children:"Скасувати"})]}),bo={"auth/invalid-email":"Invalid email address.","auth/user-not-found":"User not found. Please register.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"This email is already in use.","auth/weak-password":"Password is too weak. It must be at least 6 characters.","auth/invalid-credential":"Invalid credentials. Please check your input.","auth/too-many-requests":"Too many requests. Try later."},vo=e=>bo[e.code]||e.message,Co=e=>we().shape({email:A().required("Email is required").email("Invalid email address"),password:A().required("Password is required").min(6,"Password must be at least 6 characters"),confirmPassword:A().when("password",(o,r)=>e?r.required("Confirm Password is required").oneOf([je("password")],"Passwords must match"):r.notRequired())}),So=({onClose:e})=>{var v,C,q;const[o,r]=de.useState(!1),n=B(m=>m.auth.error),s=b(),i=Be(),a=Fe(i.breakpoints.down("sm")),c=Co(o),{register:l,handleSubmit:d,formState:{errors:h}}=le({resolver:be(c)}),u=async m=>{s(G(!0));try{if(o){if(m.password!==m.confirmPassword){s(Y("Passwords do not match"));return}const y=await lo(m.email,m.password);s(I(y))}else{const y=await uo(m.email,m.password);s(I(y))}e()}catch(y){s(Y(vo(y)))}finally{s(G(!1))}};return t.jsxs(ee,{elevation:3,sx:{padding:3,width:{xs:"100%",sm:400},maxWidth:500,margin:"auto",borderRadius:2,textAlign:"center"},children:[t.jsx(x,{variant:a?"h5":"h4",gutterBottom:!0,children:o?"Register":"Login"}),t.jsxs(w,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2,mt:2},onSubmit:d(u),children:[t.jsx(O,{label:"Email",type:"text",variant:"outlined",fullWidth:!0,...l("email"),error:!!h.email,helperText:(v=h.email)==null?void 0:v.message}),t.jsx(O,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,...l("password"),error:!!h.password,helperText:(C=h.password)==null?void 0:C.message}),o&&t.jsx(O,{label:"Confirm Password",type:"password",variant:"outlined",fullWidth:!0,...l("confirmPassword"),error:!!h.confirmPassword,helperText:(q=h.confirmPassword)==null?void 0:q.message}),t.jsx(f,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2,fontSize:a?"0.875rem":"1rem",padding:a?"10px":"12px"},children:o?"Register":"Login"}),n&&t.jsx(qe,{severity:"error",children:n}),t.jsxs(x,{variant:"body2",sx:{mt:2},children:[o?"Already have an account?":"Don't have an account?"," ",t.jsx(Ne,{component:"button",variant:"body2",onClick:m=>{m.preventDefault(),r(!o)},children:o?"Login here":"Register here"})]})]})]})},ko=({onClose:e,onConfirm:o})=>t.jsxs(ee,{elevation:3,sx:{padding:4,maxWidth:400,width:"100%",textAlign:"center",borderRadius:2},children:[t.jsx(x,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Are you sure you want to log out?"}),t.jsx(x,{variant:"body1",color:"textSecondary",sx:{mb:3},children:"Your data will remain safe, and you can always log in again."}),t.jsxs(w,{sx:{display:"flex",justifyContent:"center",gap:2},children:[t.jsx(f,{variant:"outlined",color:"primary",onClick:e,sx:{minWidth:100},children:"No"}),t.jsx(f,{variant:"contained",color:"error",onClick:o,sx:{minWidth:100},children:"Yes"})]})]}),To="_modalOverlay_16jnk_1",Eo="_modalContent_16jnk_14",Po="_fadeIn_16jnk_1",Q={modalOverlay:To,modalContent:Eo,fadeIn:Po},Ao={example:wo,confirm:jo,auth:So,logout:ko},Lo=()=>{const{isOpen:e,modalType:o,modalProps:r}=B(a=>a.modal),n=b();if(!e||!o)return null;const s=Ao[o],i=a=>{!(r!=null&&r.disableBackdropClick)&&a.target===a.currentTarget&&n(D())};return ue.createPortal(t.jsx("div",{className:Q.modalOverlay,onClick:i,children:t.jsx("div",{className:Q.modalContent,children:t.jsx(s,{...r,onClose:()=>n(D())})})}),document.body)},Ro=p.lazy(()=>F(()=>import("./index-Ym5PNaS_.js"),__vite__mapDeps([0,1,2,3,4]))),Oo=p.lazy(()=>F(()=>import("./index-C4Csgd0h.js"),__vite__mapDeps([5,1,2,3,4]))),Io=p.lazy(()=>F(()=>import("./index-DQ-awO-w.js"),__vite__mapDeps([6,1,2,4,3]))),_o=()=>{const e=b();co();const o=p.useCallback(r=>{e(r?I(r):_())},[e]);return p.useEffect(()=>po(n=>{n||e(_())}),[o]),t.jsxs(me,{children:[t.jsx(yo,{}),t.jsx(pe,{theme:go,children:t.jsx(he,{children:t.jsx(xo,{children:t.jsx(p.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsxs(fe,{children:[t.jsx(S,{path:"/",element:t.jsx(Ro,{})}),t.jsx(S,{path:"/counter",element:t.jsx(Oo,{})}),t.jsx(S,{path:"/todo-app",element:t.jsx(Io,{})}),t.jsx(S,{path:"/login"})]})})})})}),t.jsx(Lo,{})]})};xe.createRoot(document.getElementById("root")).render(t.jsx(p.StrictMode,{children:t.jsx(ge,{store:M,children:t.jsx(_o,{})})}));export{yo as S,b as a,Ve as b,H as c,qo as d,Ze as e,Fo as i,No as s,B as u};
